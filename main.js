!function(){"use strict";class e{constructor(e,t,s){this.name=e.name,this.link=e.link,this._cardSelector=t,this._handleImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._likeButton.classList.toggle("card__like-button_active")})),this._deleteButton.addEventListener("click",(()=>{this._element.remove(),this._element=null})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this)}))}generateCard(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardTitle=this._element.querySelector(".card__title"),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._cardImage.src=this.link,this._cardImage.alt=this.name,this._cardTitle.textContent=this.name,this._setEventListeners(),this._element}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._errorClassVisible=e.errorClassVisible,this._form=t,this._inputs=Array.from(this._form.querySelectorAll(this._inputSelector)),this._button=this._form.querySelector(this._submitButtonSelector)}_showError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.innerText=e.validationMessage,t.classList.add(this._errorClassVisible)}_hideError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.innerText="",t.classList.remove(this._errorClassVisible)}_checkInputValidity(e){return!!e.validity.valid}disableButton(){this._button.disabled=!0,this._button.classList.add(this._inactiveButtonClass)}_enableButton(){this._button.disabled=!1,this._button.classList.remove(this._inactiveButtonClass)}_setEventListeners(){this.disableButton(),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e)?this._hideError(e):this._showError(e),this._inputs.every((e=>this._checkInputValidity(e)))?this._enableButton():this.disableButton()}))}),this)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()}),this),this._setEventListeners()}resetValidation(){this._inputs.forEach((e=>this._hideError(e))),this.disableButton()}}class s{constructor(e){this._bindHandler=e=>{this._handleEscButton(e)},this._popupElement=document.querySelector(e),this._closeButton=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._bindHandler)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._bindHandler)}_handleEscButton(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target!==this._popupElement&&e.target!==this._closeButton||this.close()}),this)}}class r extends s{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}_getInputValues(){const e=Array.from(this._popupForm.querySelectorAll("input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset()}))}}const n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error",errorClassVisible:"modal__error_visible"},i=document.querySelector("#profile-edit-button"),o=document.forms["profile-modal-form"],a=document.querySelector("[name='name']"),l=document.querySelector("[name='description']"),c=document.forms["card-add-modal-form"],u=document.querySelector("#card-add-button"),m={};Array.from(document.querySelectorAll(n.formSelector)).forEach((e=>{const s=new t(n,e);m[e.getAttribute("id")]=s,s.enableValidation()}));const d=new class{constructor(e){let{nameSelector:t,aboutSelector:s}=e;this._nameElement=document.querySelector(t),this._aboutElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.innerText,about:this._aboutElement.innerText}}setUserInfo(e){this._nameElement.innerText=e.name,this._aboutElement.innerText=e.about}}({nameSelector:"#profile-name",aboutSelector:"#profile-description"}),_=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._containerElement=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._containerElement.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{_.addItem(b(e))}},"#cards-list"),h=new r("#profile-edit-modal",(e=>{d.setUserInfo({name:e.name,about:e.description}),h.close()}));h.setEventListeners();const p=new r("#card-add-modal",(e=>{const t={name:e.title,link:e.url};_.addItem(b(t)),p.close(),m[c.id].disableButton()}));p.setEventListeners();const E=new class extends s{constructor(e){super(e),this._image=this._popupElement.querySelector(".modal__image"),this._title=this._popupElement.querySelector(".modal__title")}open(e){this._image.src=e.link,this._image.alt=e.name,this._title.textContent=e.name,super.open()}}("#card-view-modal");function b(t){return new e(t,"#card-template",(e=>E.open(e))).generateCard()}E.setEventListeners(),_.renderItems(),i.addEventListener("click",(()=>{const{name:e,about:t}=d.getUserInfo();a.value=e,l.value=t,m[o.id].resetValidation(),h.open()})),u.addEventListener("click",(()=>{p.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3RDb0gsRUFBa0JwRCxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICAvLyBjb25zdHJ1Y3Rvcih7bmFtZSxsaW5rfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMubGluayA9IGRhdGEubGluaztcbiAgICAvLyBjYXJkU2VsZWN0b3IgaXMgZm9yIGNob29zaW5nIHdoaWNoIHRlbXBsYXRlIHRvIHVzZVxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICAvLyBoYW5kbGVJbWFnZUNsaWNrIHdpbGwgaGFuZGxlIGhvdyB0byBvcGVuIGEgcGljdHVyZSBtb2RhbFxuICAgIC8vIHRoaXMuZ2V0Q2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudDtcbiAgfVxuXG4gIC8vINCi0LDQuiDQutCw0Log0LrQsNGA0YLQvtGH0LrQsCDRgdC+0LfQtNCw0ZHRgtGB0Y8g0L3QsCDQvtGB0L3QvtCy0LUg0YjQsNCx0LvQvtC90LAsINC90YPQttC90L4g0LrQu9C+0L3QuNGA0L7QstCw0YLRjCDQtdCz0L4g0YHQvtC00LXRgNC20LjQvNC+0LVcbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIC8vINCd0LDRhdC+0LTQuNC8IDx0ZW1wbGF0ZT5cbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAvLyDQndCw0YXQvtC00LjQvCDRgdCw0Lwg0Y3Qu9C10LzQtdC90YIg0LrQsNGA0YLQvtGH0LrQuCDQstC90YPRgtGA0Lgg0L3QtdCz0L4uINCa0LvQvtC90LjRgNGD0LXQvCDQutCw0YDRgtC+0YfQutGDXG4gICAgICAvLyBjbG9uZU5vZGUg0LTQtdC70LDQtdGCINCz0LvRg9Cx0L7QutC+0LUg0LrQvtC/0LjRgNC+0LLQsNC90LjQtSwg0LLQutC70Y7Rh9Cw0Y8g0LLRgdC1INC00L7Rh9C10YDQvdC40LUg0Y3Qu9C10LzQtdC90YLRi1xuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIC8v0JLQvtC30LLRgNCw0YnQsNC10Lwg0LrQu9C+0L3QuNGA0L7QstCw0L3QvdGD0Y4g0LrQsNGA0YLQvtGH0LrRg1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LjQu9C4INGD0LHQuNGA0LDQtdC8INC70LDQudC6XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIC8vINCj0LTQsNC70Y/QtdC8INC60LDRgNGC0L7Rh9C60YMg0LjQtyBET01cbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgLy8g0J7RgtC60YDRi9Cy0LDQtdC8INC40LfQvtCx0YDQsNC20LXQvdC40LVcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7IC8vINCf0L7Qu9GD0YfQsNC10Lwg0YjQsNCx0LvQvtC9INC60LDRgNGC0L7Rh9C60LhcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgICAvLyDQl9Cw0L/QvtC70L3Rj9C10Lwg0LrQsNGA0YLQvtGH0LrRgyDQtNCw0L3QvdGL0LzQuFxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLmxpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMubmFtZTtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG5cbiAgICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDRgdC+0LHRi9GC0LjQuVxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDsgLy8g0JLQvtC30LLRgNCw0YnQsNC10Lwg0LPQvtGC0L7QstGD0Y4g0LrQsNGA0YLQvtGH0LrRg1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gY29uZmlnLmZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3NWaXNpYmxlID0gY29uZmlnLmVycm9yQ2xhc3NWaXNpYmxlO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgX3Nob3dFcnJvcihpbnB1dCkge1xuICAgIC8vYWRkIGNsYXNzIG9mIGlucHV0IHdpdGggcmVkIGJvcmRlcixmaW5kIGV2ZXJ5IGlucHV0LmlkICsgXCItZXJyb3JcIlxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5pbm5lclRleHQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzVmlzaWJsZSk7XG4gIH1cblxuICBfaGlkZUVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmlubmVyVGV4dCA9IFwiXCI7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzc1Zpc2libGUpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBkaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dDEpID0+IHtcbiAgICAgIGlucHV0MS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dDEpKSB7XG4gICAgICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0MSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0MSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2lucHV0cy5ldmVyeSgoaW5wdXQyKSA9PiB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQyKSkpIHtcbiAgICAgICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgdGhpcyk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwic3VibWl0XCIsXG4gICAgICAoZXZ0KSA9PiB7XG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSxcbiAgICAgIHRoaXNcbiAgICApO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpKTtcbiAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fYmluZEhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUVzY0J1dHRvbihldmVudCk7XG4gICAgfTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9iaW5kSGFuZGxlcik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9iaW5kSGFuZGxlcik7XG4gIH1cblxuICBfaGFuZGxlRXNjQnV0dG9uKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBldmVudC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCB8fFxuICAgICAgICAgIGV2ZW50LnRhcmdldCA9PT0gdGhpcy5fY2xvc2VCdXR0b25cbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdGhpc1xuICAgICk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICAvL2NvbGxlY3RzIGRhdGEgZnJvbSBhbGwgdGhlIGlucHV0IGZpZWxkcyBhbmQgcmV0dXJucyBpdCBhcyBhbiBvYmplY3RcbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGxpc3RPZklucHV0cyA9IEFycmF5LmZyb20odGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKSk7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgbGlzdE9mSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICByZXN1bHRbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8g0JLRi9C30L7QsiDRgNC+0LTQuNGC0LXQu9GM0YHQutC+0LPQviDQvNC10YLQvtC00LBcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcbiAgZXJyb3JDbGFzc1Zpc2libGU6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gVmFyaWFibGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZU1vZGFsRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1tb2RhbC1mb3JtXCJdO1xuY29uc3QgbW9kYWxJbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J25hbWUnXVwiKTtcbmNvbnN0IG1vZGFsSW5wdXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nZGVzY3JpcHRpb24nXVwiKTtcbmNvbnN0IGNhcmRBZGRNb2RhbEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImNhcmQtYWRkLW1vZGFsLWZvcm1cIl07XG5jb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWFkZC1idXR0b25cIik7XG5jb25zdCBhbGxWYWxpZGF0b3JzID0ge307XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5mdW5jdGlvbiB2YWxpZGF0ZUFsbEZvcm1zKCkge1xuICBjb25zdCBhbGxGb3JtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGFsbEZvcm1zLmZvckVhY2goKGZvcm0pID0+IHtcbiAgICBjb25zdCBmb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtKTtcbiAgICAvL2dldCBmcm9tIGZvcm0gaXRzIGlkIGFuZCBwdXQgaW4gdGhlIG9iamVjdCBieSBrZXkoaWQpIHZhbGlkYXRvclxuICAgIGFsbFZhbGlkYXRvcnNbZm9ybS5nZXRBdHRyaWJ1dGUoXCJpZFwiKV0gPSBmb3JtVmFsaWRhdG9yO1xuICAgIGZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn1cbnZhbGlkYXRlQWxsRm9ybXMoKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiI3Byb2ZpbGUtbmFtZVwiLFxuICBhYm91dFNlbGVjdG9yOiBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIsXG59KTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuLy8gQ2FyZHMgY29udGFpbmVyXG5jb25zdCBjYXJkc0NvbnRhaW5lclNlbGVjdG9yID0gXCIjY2FyZHMtbGlzdFwiO1xuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XG4gICAgICBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkRGF0YSkpO1xuICAgIH0sXG4gIH0sXG4gIGNhcmRzQ29udGFpbmVyU2VsZWN0b3Jcbik7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cbi8vIEVkaXQgcHJvZmlsZSBQb3B1cFxuY29uc3QgcG9wdXBXaXRoRm9ybUVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIChmb3JtRGF0YSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZTogZm9ybURhdGEubmFtZSwgYWJvdXQ6IGZvcm1EYXRhLmRlc2NyaXB0aW9uIH0pO1xuICAgIHBvcHVwV2l0aEZvcm1FZGl0LmNsb3NlKCk7XG4gIH1cbik7XG5wb3B1cFdpdGhGb3JtRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG4vLyBBZGQgY2FyZCBwb3B1cFxuY29uc3QgcG9wdXBXaXRoRm9ybUNhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNjYXJkLWFkZC1tb2RhbFwiLCAoZm9ybURhdGEpID0+IHtcbiAgY29uc3QgY2FyZERhdGEgPSB7IG5hbWU6IGZvcm1EYXRhLnRpdGxlLCBsaW5rOiBmb3JtRGF0YS51cmwgfTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZERhdGEpKTtcbiAgcG9wdXBXaXRoRm9ybUNhcmQuY2xvc2UoKTtcbiAgYWxsVmFsaWRhdG9yc1tjYXJkQWRkTW9kYWxGb3JtLmlkXS5kaXNhYmxlQnV0dG9uKCk7XG59KTtcbnBvcHVwV2l0aEZvcm1DYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cbi8vIEltYWdlIHBvcHVwXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNjYXJkLXZpZXctbW9kYWxcIik7XG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgKGRhdGEpID0+XG4gICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihkYXRhKVxuICApO1xuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cblxuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG4vLyBFZGl0IHByb2ZpbGUgUG9wdXAgTGlzdGVuZXJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIG1vZGFsSW5wdXROYW1lLnZhbHVlID0gbmFtZTtcbiAgbW9kYWxJbnB1dERlc2NyaXB0aW9uLnZhbHVlID0gYWJvdXQ7XG4gIGFsbFZhbGlkYXRvcnNbcHJvZmlsZU1vZGFsRm9ybS5pZF0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHBvcHVwV2l0aEZvcm1FZGl0Lm9wZW4oKTtcbn0pO1xuXG4vLyBBZGQgQ2FyZCBQb3B1cCBMaXN0ZW5lclxuY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cFdpdGhGb3JtQ2FyZC5vcGVuKCk7XG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Fib3V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XG4gIH1cblxuICAvLyDQnNC10YLQvtC0INC/0L7Qu9GD0YfQtdC90LjRjyDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LVcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LmlubmVyVGV4dCxcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dEVsZW1lbnQuaW5uZXJUZXh0LFxuICAgIH07XG4gIH1cblxuICAvLyDQnNC10YLQvtC0INGD0YHRgtCw0L3QvtCy0LrQuCDQvdC+0LLQvtC5INC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQuaW5uZXJUZXh0ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2Fib3V0RWxlbWVudC5pbm5lclRleHQgPSBkYXRhLmFib3V0O1xuICB9XG59XG4iLCIvL1RvIHJlbmRlciBhbGwgY2FyZHMgYW5kIHdoZXJlIHRvIHB1dCBldmVyeSBzaW5nbGUgY2FyZFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZHNDb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkc0NvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyRWxlbWVudC5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZVwiKTtcbiAgfVxuXG4gIC8vZGF0YSA9IHtuYW1lLCBsaW5rfVxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIm5hbWUiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9kZWxldGVCdXR0b24iLCJfZWxlbWVudCIsInJlbW92ZSIsIl9jYXJkSW1hZ2UiLCJnZW5lcmF0ZUNhcmQiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybSIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzc1Zpc2libGUiLCJlcnJvckNsYXNzVmlzaWJsZSIsIl9mb3JtIiwiX2lucHV0cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uIiwiX3Nob3dFcnJvciIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJpbm5lclRleHQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlRXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJmb3JFYWNoIiwiaW5wdXQxIiwiZXZlcnkiLCJpbnB1dDIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfYmluZEhhbmRsZXIiLCJldmVudCIsIl9oYW5kbGVFc2NCdXR0b24iLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImxpc3RPZklucHV0cyIsInJlc3VsdCIsInZhbHVlIiwicmVzZXQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVNb2RhbEZvcm0iLCJmb3JtcyIsIm1vZGFsSW5wdXROYW1lIiwibW9kYWxJbnB1dERlc2NyaXB0aW9uIiwiY2FyZEFkZE1vZGFsRm9ybSIsImNhcmRBZGRCdXR0b24iLCJhbGxWYWxpZGF0b3JzIiwiZm9ybVZhbGlkYXRvciIsImdldEF0dHJpYnV0ZSIsInVzZXJJbmZvIiwiX3JlZiIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfYWJvdXRFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJhYm91dCIsInNldFVzZXJJbmZvIiwic2VjdGlvbiIsImNhcmRzQ29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lckVsZW1lbnQiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkRGF0YSIsImNyZWF0ZUNhcmQiLCJwb3B1cFdpdGhGb3JtRWRpdCIsImZvcm1EYXRhIiwiZGVzY3JpcHRpb24iLCJwb3B1cFdpdGhGb3JtQ2FyZCIsInRpdGxlIiwidXJsIiwicG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2UiLCJfdGl0bGUiXSwic291cmNlUm9vdCI6IiJ9